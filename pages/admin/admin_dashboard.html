<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>首页 | 阳光优采</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- FontAwesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  
  <!-- 自定义样式 -->
  <link rel="stylesheet" href="../../assets/custom.css">
  
  <style>
    /* Tailwind 配置扩展 */
    @layer utilities {
      .text-primary { color: #E2231A; }
      .bg-primary { background-color: #E2231A; }
      .border-primary { border-color: #E2231A; }
    }
    
    /* 页面背景渐变 */
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
    }
    
    /* 模块标题样式 - 美化 */
    .module-title {
      font-size: 18px;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 16px;
      padding-left: 12px;
      border-left: 3px solid #E2231A;
      display: inline-block;
    }
    
    /* 模块容器间距 */
    .module-section {
      margin-bottom: 32px;
    }
    
    /* 销售TOP模块紧凑布局 */
    .sales-top-section {
      margin-bottom: 20px;
    }
    
    .sales-top-section .chart-card {
      min-height: auto;
      padding: 12px;
    }
    
    .sales-top-section .chart-card h3 {
      font-size: 18px;
      margin-bottom: 8px;
    }
    
    /* 销售TOP表格更紧凑 */
    .sales-top-section .top-table thead th {
      padding: 6px 8px;
      font-size: 10px;
    }
    
    .sales-top-section .top-table tbody td {
      padding: 4px 8px;
      font-size: 12px;
    }
    
    .sales-top-section .top-table .rank-cell {
      width: 50px;
      padding: 8px 2px;
    }
    
    .sales-top-section .rank-badge {
      width: 28px;
      height: 28px;
      font-size: 11px;
    }
    
    .sales-top-section .rank-badge i {
      font-size: 14px;
    }
    
    .sales-top-section .top-table .name-cell {
      font-size: 12px;
    }
    
    .sales-top-section .top-table .name-cell .flex {
      gap: 8px;
    }
    
    /* 销售TOP表格滚动容器：限制显示5行 */
    .sales-top-section .table-scroll-container {
      max-height: calc(5 * 40px); /* 每行约40px高度，显示5行，更紧凑 */
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    /* 销售TOP表格行高调整 - 更紧凑 */
    .sales-top-section .top-table tbody tr {
      height: 40px;
      min-height: 40px;
    }
    
    /* 卡片样式美化 */
    .stat-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(226, 35, 26, 0.08);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent 0%, rgba(226, 35, 26, 0.3) 50%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(226, 35, 26, 0.08);
      border-color: rgba(226, 35, 26, 0.2);
    }
    
    .stat-card:hover::before {
      opacity: 1;
    }
    
    /* 图表容器样式 */
    .chart-container {
      position: relative;
      height: 320px;
      padding: 10px 0;
      margin-top: 10px;
    }
    
    /* 确保图表卡片高度一致 */
    .chart-card {
      min-height: 420px;
      display: flex;
      flex-direction: column;
    }
    
    /* 筛选区美化 */
    .filter-section {
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      border: 1px solid #e5e7eb;
    }
    
    /* 按钮样式美化 */
    button[onclick*="switchPeriod"],
    button[onclick*="setSalesTopRange"],
    button[onclick*="setHotDim"] {
      transition: all 0.2s ease;
      font-weight: 500;
    }
    
    button[onclick*="switchPeriod"]:hover,
    button[onclick*="setSalesTopRange"]:hover,
    button[onclick*="setHotDim"]:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    /* 图表卡片样式 */
    .chart-card {
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      border: 1px solid rgba(226, 35, 26, 0.08);
      transition: all 0.3s ease;
    }
    
    .chart-card:hover {
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08), 0 2px 6px rgba(226, 35, 26, 0.06);
      border-color: rgba(226, 35, 26, 0.15);
    }
    
    /* 待办卡片美化 */
    .todo-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
    }
    
    .todo-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: currentColor;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .todo-card:hover {
      transform: translateX(4px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      border-color: currentColor;
    }
    
    .todo-card:hover::after {
      opacity: 0.3;
    }
    
    /* 页面头部美化 */
    .page-header {
      margin-bottom: 24px;
    }
    
    /* 图标容器美化 */
    .icon-container {
      transition: all 0.3s ease;
    }
    
    .stat-card:hover .icon-container {
      transform: scale(1.1) rotate(5deg);
    }
    
    /* 趋势指示器美化 */
    .trend-up {
      color: #10b981;
      font-weight: 600;
    }
    
    .trend-down {
      color: #ef4444;
      font-weight: 600;
    }
    
    /* 动画效果 */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in {
      animation: fadeInUp 0.6s ease-out;
    }
    
    /* 徽章样式 */
    .badge {
      background: linear-gradient(135deg, #E2231A 0%, #c01e16 100%);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      box-shadow: 0 2px 4px rgba(226, 35, 26, 0.3);
    }
    
    .badge-warning {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
    }
    
    /* 下拉框美化 */
    select {
      transition: all 0.2s ease;
    }
    
    select:hover {
      border-color: #d1d5db;
    }
    
    select:focus {
      border-color: #E2231A;
      outline: none;
    }
    
    /* 刷新和导出按钮美化 */
    button[onclick*="refreshData"],
    button[onclick*="exportData"] {
      transition: all 0.2s ease;
      font-weight: 500;
    }
    
    button[onclick*="refreshData"]:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    button[onclick*="exportData"]:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(226, 35, 26, 0.3);
    }
    
    /* 销售TOP表格美化 */
    .top-table {
      border-collapse: separate;
      border-spacing: 0;
    }
    
    .top-table thead {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    }
    
    .top-table thead th {
      font-weight: 600;
      color: #475569;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 0.5px;
      padding: 8px 12px;
      border-bottom: 2px solid #e2e8f0;
    }
    
    .top-table tbody tr {
      transition: all 0.2s ease;
      border-bottom: 1px solid #f1f5f9;
    }
    
    .top-table tbody tr:not(:last-child) {
      margin-bottom: 2px;
    }
    
    .top-table tbody tr:hover {
      background: linear-gradient(90deg, #fef2f2 0%, #fff7ed 100%);
      transform: translateX(2px);
      box-shadow: 0 2px 8px rgba(226, 35, 26, 0.08);
    }
    
    .top-table tbody tr:last-child {
      border-bottom: none;
    }
    
    .top-table tbody td {
      padding: 10px 12px;
      color: #1e293b;
      vertical-align: middle;
    }
    
    /* 排名单元格样式 */
    .top-table .rank-cell {
      text-align: center;
      width: 60px;
      padding: 10px 4px;
    }
    
    /* 排名容器 */
    .rank-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-weight: 700;
      font-size: 12px;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .rank-badge i {
      font-size: 16px;
    }
    
    /* 第一名：金牌 */
    .rank-badge.rank-1 {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      box-shadow: 0 3px 10px rgba(245, 158, 11, 0.5);
    }
    
    .rank-badge.rank-1:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.6);
    }
    
    /* 第二名：银牌 */
    .rank-badge.rank-2 {
      background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
      color: white;
      box-shadow: 0 3px 10px rgba(100, 116, 139, 0.5);
    }
    
    .rank-badge.rank-2:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(100, 116, 139, 0.6);
    }
    
    /* 第三名：铜牌 */
    .rank-badge.rank-3 {
      background: linear-gradient(135deg, #c2410c 0%, #9a3412 100%);
      color: white;
      box-shadow: 0 3px 10px rgba(194, 65, 12, 0.5);
    }
    
    .rank-badge.rank-3:hover {
      transform: scale(1.15);
      box-shadow: 0 4px 12px rgba(194, 65, 12, 0.6);
    }
    
    /* 第4-10名：渐变圆形数字 */
    .rank-badge.rank-4,
    .rank-badge.rank-5,
    .rank-badge.rank-6,
    .rank-badge.rank-7,
    .rank-badge.rank-8,
    .rank-badge.rank-9,
    .rank-badge.rank-10 {
      background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
      color: #475569;
      font-size: 13px;
      font-weight: 700;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    
    .rank-badge.rank-4:hover,
    .rank-badge.rank-5:hover,
    .rank-badge.rank-6:hover,
    .rank-badge.rank-7:hover,
    .rank-badge.rank-8:hover,
    .rank-badge.rank-9:hover,
    .rank-badge.rank-10:hover {
      transform: scale(1.1);
      background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
      color: white;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }
    
    .top-table .name-cell {
      font-weight: 500;
      color: #1e293b;
      max-width: 200px;
      font-size: 13px;
    }
    
    .top-table .amount-cell {
      font-weight: 700;
      color: #E2231A;
      font-size: 13px;
      text-align: right;
    }
    
    /* 销售TOP模块金额单元格字体大小 */
    .sales-top-section .top-table .amount-cell {
      font-size: 13px;
    }
    
    .top-table .category-cell {
      font-size: 12px;
      color: #64748b;
      font-weight: 500;
    }
    
    /* 自定义时间选择器内联样式 */
    .custom-date-inline {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-left: 8px;
      padding: 6px 12px;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .custom-date-inline input[type="date"] {
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 12px;
      transition: all 0.2s;
    }
    
    .custom-date-inline input[type="date"]:focus {
      outline: none;
      border-color: #E2231A;
      box-shadow: 0 0 0 3px rgba(226, 35, 26, 0.1);
    }
    
    .custom-date-inline button {
      padding: 4px 12px;
      font-size: 12px;
    }
    
    /* 左侧导航栏样式 */
    .admin-sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 240px;
      height: 100vh;
      background: #1e293b;
      color: white;
      transition: width 0.3s ease;
      z-index: 100;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    .admin-sidebar.collapsed {
      width: 64px;
    }
    
    .admin-sidebar-header {
      padding: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .admin-sidebar-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      font-size: 16px;
      white-space: nowrap;
      opacity: 1;
      transition: opacity 0.3s;
    }
    
    .admin-sidebar.collapsed .admin-sidebar-logo span {
      opacity: 0;
      width: 0;
      overflow: hidden;
    }
    
    .admin-sidebar-toggle {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    
    .admin-sidebar-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .admin-menu {
      padding: 10px 0;
    }
    
    .admin-menu-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      white-space: nowrap;
    }
    
    .admin-menu-item:hover {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }
    
    .admin-menu-item.active {
      background: rgba(226, 35, 26, 0.2);
      color: white;
      border-left: 3px solid #E2231A;
    }
    
    .admin-menu-item i {
      width: 20px;
      text-align: center;
      flex-shrink: 0;
    }
    
    .admin-menu-item span {
      opacity: 1;
      transition: opacity 0.3s;
    }
    
    .admin-sidebar.collapsed .admin-menu-item span {
      opacity: 0;
      width: 0;
      overflow: hidden;
    }
    
    /* 内容区域 */
    .admin-content {
      margin-left: 240px;
      transition: margin-left 0.3s ease;
      min-height: 100vh;
    }
    
    .admin-sidebar.collapsed ~ .admin-content {
      margin-left: 64px;
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- 左侧导航栏 -->
  <div class="admin-sidebar" id="adminSidebar">
    <div class="admin-sidebar-header">
      <div class="admin-sidebar-logo">
        <i class="fas fa-cog"></i>
        <span>管理后台</span>
      </div>
      <button class="admin-sidebar-toggle" onclick="toggleAdminSidebar()" title="收起/展开">
        <i class="fas fa-chevron-left" id="sidebarToggleIcon"></i>
      </button>
    </div>
    <nav class="admin-menu">
      <a href="admin_dashboard.html" class="admin-menu-item active" onclick="handleMenuClick(this, 'admin_dashboard.html')">
        <i class="fas fa-home"></i>
        <span>首页</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_users.html')">
        <i class="fas fa-users"></i>
        <span>用户信息管理</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_verify.html')">
        <i class="fas fa-building"></i>
        <span>用户企业信息认证</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_verify.html')">
        <i class="fas fa-store"></i>
        <span>供应商认证</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_po.html')">
        <i class="fas fa-file-invoice"></i>
        <span>采购单管理</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_orders.html')">
        <i class="fas fa-shopping-bag"></i>
        <span>订单信息</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_notice.html')">
        <i class="fas fa-bullhorn"></i>
        <span>公告管理</span>
      </a>
      <a href="admin_reco_manage.html" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_reco_manage.html')">
        <i class="fas fa-layer-group"></i>
        <span>分类推荐管理</span>
      </a>
      <a href="#" class="admin-menu-item" onclick="handleMenuClick(this, 'admin_station.html')">
        <i class="fas fa-sitemap"></i>
        <span>分站管理</span>
      </a>
    </nav>
  </div>
  
  <!-- 主容器 -->
  <div class="admin-content">
    <div class="p-6 max-w-[1920px] mx-auto">
    
    <!-- ==================== 页面头部 ==================== -->
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6 fade-in">
      <div class="flex items-center justify-between">
        <!-- 左侧：标题区域 -->
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 bg-primary rounded-lg flex items-center justify-center shadow-md">
            <i class="fas fa-briefcase text-white text-xl"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold text-gray-900 mb-1">工作台</h1>
            <p class="text-sm text-gray-500">您的工作中心，快速处理待办事项</p>
          </div>
        </div>
        
        <!-- 右侧：用户信息 -->
        <div class="flex items-center gap-3 px-4 py-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer">
          <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
            <i class="fas fa-user text-white"></i>
          </div>
          <span class="text-sm font-medium text-gray-700">张三 (运营专员)</span>
        </div>
      </div>
    </div>
    
    <!-- ==================== 模块1：核心经营指标（5个指标） ==================== -->
    <div class="module-section">
      <h2 class="module-title">核心经营指标</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 fade-in">
        
        <!-- 卡片1：订单量 -->
        <div class="stat-card bg-white rounded-xl shadow-md p-6 cursor-pointer" onclick="navigateTo('orders')">
          <div class="flex items-start justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500 mb-2 font-medium">订单量</p>
              <p class="text-3xl font-bold text-gray-900" id="orderTotal">1,248</p>
            </div>
            <div class="icon-container w-14 h-14 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center shadow-lg">
              <i class="fas fa-shopping-cart text-blue-600 text-xl"></i>
            </div>
          </div>
          <div class="flex items-center justify-between text-xs">
            <div>
              <span class="text-gray-500 mr-1">较上月</span>
              <span class="trend-up font-medium" id="orderTrend">
                <i class="fas fa-arrow-up"></i> +12.3%
              </span>
            </div>
          </div>
        </div>
        
        <!-- 卡片2：成交金额 -->
        <div class="stat-card bg-white rounded-xl shadow-md p-6">
          <div class="flex items-start justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500 mb-2 font-medium">成交金额</p>
              <p class="text-3xl font-bold text-primary" id="gmvMain">234.57万</p>
            </div>
            <div class="icon-container w-14 h-14 bg-gradient-to-br from-red-100 to-red-200 rounded-xl flex items-center justify-center shadow-lg">
              <i class="fas fa-yen-sign text-red-600 text-xl"></i>
            </div>
          </div>
          <div class="flex items-center text-xs">
            <span class="text-gray-500 mr-1">较上月</span>
            <span class="trend-up font-medium" id="gmvTrend">
              <i class="fas fa-arrow-up"></i> +8.5%
            </span>
          </div>
        </div>
        
        <!-- 卡片3：活跃采购企业数 -->
        <div class="stat-card bg-white rounded-xl shadow-md p-6 cursor-pointer" onclick="navigateTo('users')">
          <div class="flex items-start justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500 mb-2 font-medium">活跃采购企业数</p>
              <p class="text-3xl font-bold text-gray-900" id="activeUsers">50/100</p>
            </div>
            <div class="icon-container w-14 h-14 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center shadow-lg">
              <i class="fas fa-users text-green-600 text-xl"></i>
            </div>
          </div>
          <div class="flex items-center text-xs">
            <span class="text-gray-500 mr-1">较上月</span>
            <span class="trend-up font-medium" id="userTrend">
              <i class="fas fa-arrow-up"></i> +5.2%
            </span>
          </div>
        </div>
        
        <!-- 卡片4：供应商数量 -->
        <div class="stat-card bg-white rounded-xl shadow-md p-6 cursor-pointer" onclick="navigateTo('suppliers')">
          <div class="flex items-start justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500 mb-2 font-medium">供应商数量</p>
              <p class="text-3xl font-bold text-gray-900" id="supplierCount">45</p>
            </div>
            <div class="icon-container w-14 h-14 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center shadow-lg">
              <i class="fas fa-store text-purple-600 text-xl"></i>
            </div>
          </div>
        </div>
        
        <!-- 卡片5：商品总数 -->
        <div class="stat-card bg-white rounded-xl shadow-md p-6">
          <div class="flex items-start justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500 mb-2 font-medium">商品总数</p>
              <p class="text-3xl font-bold text-gray-900" id="productOnline">3,200</p>
            </div>
            <div class="icon-container w-14 h-14 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl flex items-center justify-center shadow-lg">
              <i class="fas fa-box text-yellow-600 text-xl"></i>
            </div>
          </div>
          <div class="flex items-center text-xs text-gray-600">
            上架中
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- ==================== 模块2：现状趋势 ==================== -->
    <div class="module-section">
      <h2 class="module-title">现状趋势</h2>
      
      <!-- 第一行：订单量&成交金额趋势 + 订单状态分布 -->
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
        
        <!-- 图表1：订单量 & 成交金额（双轴）- 占3列 -->
        <div class="lg:col-span-3 chart-card rounded-xl p-6 fade-in">
          <div class="flex items-center gap-4 mb-5 flex-wrap">
            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-chart-line text-primary"></i>
              订单趋势
            </h3>
            <div class="flex items-center gap-2 flex-wrap">
              <button id="btnChart1Daily" class="px-4 py-1.5 text-xs rounded-lg bg-blue-600 text-white font-semibold" onclick="switchPeriod('chart1', 'daily')">日</button>
              <button id="btnChart1Weekly" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="switchPeriod('chart1', 'weekly')">周</button>
              <button id="btnChart1Monthly" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="switchPeriod('chart1', 'monthly')">月</button>
              <button id="btnChart1Custom" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="switchPeriod('chart1', 'custom')">自定义</button>
              
              <!-- 自定义时间选择器：内联显示在"自定义"按钮右侧 -->
              <div id="chart1CustomPicker" class="hidden custom-date-inline">
                <span class="text-xs text-gray-600 whitespace-nowrap">开始</span>
                <input type="date" id="chart1Start" class="px-2 py-1 border border-gray-300 rounded text-sm" />
                <span class="text-xs text-gray-600 whitespace-nowrap">结束</span>
                <input type="date" id="chart1End" class="px-2 py-1 border border-gray-300 rounded text-sm" />
                <button onclick="applyChart1Custom()" class="px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors">确定</button>
              </div>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="chart1"></canvas>
          </div>
        </div>
        
        <!-- 图表2：订单状态分布 - 占2列 -->
        <div class="lg:col-span-2 chart-card rounded-xl p-6 fade-in">
          <div class="flex items-center justify-between mb-5">
            <h3 class="text-lg font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-chart-pie text-primary"></i>
              订单状态分布
            </h3>
          </div>
          <div class="chart-container">
            <canvas id="chart2"></canvas>
          </div>
        </div>
        
      </div>
      
    </div>
    
    <!-- ==================== 模块3：销售TOP ==================== -->
    <div class="module-section sales-top-section">
      <div class="flex items-center gap-4 mb-3 flex-wrap">
        <h2 class="module-title mb-0">销售TOP</h2>
        <div class="flex items-center gap-2 flex-wrap">
          <button id="btnTopWeek" class="px-4 py-1.5 text-xs rounded-lg bg-blue-600 text-white font-semibold" onclick="setSalesTopRange('week')">周</button>
          <button id="btnTopMonth" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="setSalesTopRange('month')">月</button>
          <button id="btnTopYear" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="setSalesTopRange('year')">年</button>
          <button id="btnTopCustom" class="px-4 py-1.5 text-xs rounded-lg bg-gray-200 text-gray-700 font-medium" onclick="setSalesTopRange('custom')">自定义</button>
          
          <!-- 自定义时间选择器：内联显示在"自定义"按钮右侧 -->
          <div id="salesTopCustomPicker" class="hidden custom-date-inline">
            <span class="text-xs text-gray-600 whitespace-nowrap">开始</span>
            <input type="date" id="salesTopStart" class="px-2 py-1 border border-gray-300 rounded text-sm" />
            <span class="text-xs text-gray-600 whitespace-nowrap">结束</span>
            <input type="date" id="salesTopEnd" class="px-2 py-1 border border-gray-300 rounded text-sm" />
            <button onclick="applySalesTopCustom()" class="px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors">确定</button>
          </div>
        </div>
      </div>
      
      <!-- 四列 TOP10 -->
      <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4">
        <!-- 采购方TOP10 -->
        <div class="chart-card rounded-xl p-4 fade-in">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-building text-primary text-xs"></i>
              采购方 TOP10
            </h3>
          </div>
          
          <div class="table-scroll-container -mx-2 px-2">
            <table class="w-full top-table">
              <tbody id="topBuyerTbody"></tbody>
            </table>
          </div>
        </div>
        
        <!-- 供应商TOP10 -->
        <div class="chart-card rounded-xl p-4 fade-in">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-store text-primary text-xs"></i>
              供应商 TOP10
            </h3>
          </div>
          
          <div class="table-scroll-container -mx-2 px-2">
            <table class="w-full top-table">
              <tbody id="topSupplierTbody"></tbody>
            </table>
          </div>
        </div>
        
        <!-- 热销品类TOP10 -->
        <div class="chart-card rounded-xl p-4 fade-in">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-fire text-primary text-xs"></i>
              热销品类 TOP10
            </h3>
          </div>
          
          <div class="table-scroll-container -mx-2 px-2">
            <table class="w-full top-table">
              <tbody id="topCategoryTbody"></tbody>
            </table>
          </div>
        </div>
        
        <!-- 热销商品TOP10 -->
        <div class="chart-card rounded-xl p-4 fade-in">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-bold text-gray-900 flex items-center gap-2">
              <i class="fas fa-box text-primary text-xs"></i>
              热销商品 TOP10
            </h3>
          </div>
          
          <div class="table-scroll-container -mx-2 px-2">
            <table class="w-full top-table">
              <tbody id="topProductTbody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ==================== 模块4：运营待办 ==================== -->
    <div class="module-section">
      <h2 class="module-title">运营待办</h2>
      <div class="bg-white rounded-xl shadow-md p-6 fade-in border border-gray-100">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          
          <!-- 待办1：待审核企业认证 -->
          <div class="todo-card p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl cursor-pointer border border-orange-200" onclick="navigateTo('enterprise-verify')">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-orange-200 to-orange-300 rounded-lg flex items-center justify-center shadow-md flex-shrink-0">
                <i class="fas fa-building text-orange-700"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-xs text-gray-600 font-medium mb-1 truncate">待审核企业认证</p>
                <p class="text-xl font-bold text-gray-900" id="todoEnterprise">3</p>
              </div>
            </div>
          </div>
          
          <!-- 待办2：待审核供应商认证 -->
          <div class="todo-card p-4 bg-gradient-to-br from-red-50 to-red-100 rounded-xl cursor-pointer border border-red-200" onclick="navigateTo('supplier-verify')">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-red-200 to-red-300 rounded-lg flex items-center justify-center shadow-md flex-shrink-0">
                <i class="fas fa-store text-red-700"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-xs text-gray-600 font-medium mb-1 truncate">待审核供应商认证</p>
                <p class="text-xl font-bold text-gray-900" id="todoSupplier">8</p>
              </div>
            </div>
          </div>
          
          <!-- 待办3：待审核采购单 -->
          <div class="todo-card p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl cursor-pointer border border-blue-200" onclick="navigateTo('po-approval')">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-blue-200 to-blue-300 rounded-lg flex items-center justify-center shadow-md flex-shrink-0">
                <i class="fas fa-file-invoice text-blue-700"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-xs text-gray-600 font-medium mb-1 truncate">待审核采购单</p>
                <p class="text-xl font-bold text-gray-900" id="todoPO">12</p>
              </div>
            </div>
          </div>
          
          <!-- 待办4：异常订单 -->
          <div class="todo-card p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl cursor-pointer border border-yellow-200" onclick="navigateTo('abnormal-orders')">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-yellow-200 to-yellow-300 rounded-lg flex items-center justify-center shadow-md flex-shrink-0">
                <i class="fas fa-exclamation-triangle text-yellow-700"></i>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-xs text-gray-600 font-medium mb-1 truncate">异常订单</p>
                <p class="text-xl font-bold text-gray-900" id="todoAbnormal">5</p>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
    
    <!-- 页脚版权信息 -->
    <div class="mt-10 mb-6 text-center">
      <div class="inline-block px-6 py-3 bg-white rounded-lg shadow-sm border border-gray-200">
        <p class="text-sm text-gray-500">
          <i class="fas fa-copyright text-gray-400 mr-1"></i>
          2026 阳光优采采购平台 | 管理后台原型演示
        </p>
      </div>
    </div>
    
    </div>
  </div>
  
  <!-- ==================== JavaScript：数据加载与图表渲染 ==================== -->
  <script src="../../assets/mock.js"></script>
  <script>
    // ========== 全局变量 ==========
    let charts = {}; // 存储所有图表实例
    let currentPeriod = 'daily'; // 当前时间粒度
    
    // ========== 销售TOP：状态 ==========
    let salesTopRange = 'week'; // week | month | year | custom
    
    // ========== 页面加载时初始化 ==========
    document.addEventListener('DOMContentLoaded', function() {
      loadDashboardData();
      initCharts();
      setSalesTopRange('week');
      renderSalesTop();
    });
    
    // ========== 加载数据到卡片 ==========
    function loadDashboardData() {
      const data = dashboardData;
      
      // 订单总量
      document.getElementById('orderTotal').textContent = formatNumber(data.orderTotal.value);
      document.getElementById('orderTrend').innerHTML = `<i class="fas fa-arrow-${data.orderTotal.trendUp ? 'up' : 'down'}"></i> ${data.orderTotal.trend}`;
      
      // 成交金额
      document.getElementById('gmvMain').textContent = formatCurrency(data.gmv.main);
      document.getElementById('gmvTrend').innerHTML = `<i class="fas fa-arrow-${data.gmv.trendUp ? 'up' : 'down'}"></i> ${data.gmv.trend}`;
      
      // 活跃用户
      document.getElementById('activeUsers').textContent = '50/100';
      document.getElementById('userTrend').innerHTML = `<i class="fas fa-arrow-${data.activeUsers.trendUp ? 'up' : 'down'}"></i> ${data.activeUsers.trend}`;
      
      // 供应商
      document.getElementById('supplierCount').textContent = data.suppliers.certified;
      
      // 商品
      document.getElementById('productOnline').textContent = formatNumber(data.products.online);
      
      // 运营待办
      document.getElementById('todoEnterprise').textContent = data.todos.enterpriseVerify;
      document.getElementById('todoSupplier').textContent = data.todos.supplierVerify;
      document.getElementById('todoPO').textContent = data.todos.poApproval;
      document.getElementById('todoAbnormal').textContent = data.todos.abnormalOrders;
    }
    
    // ========== 初始化所有图表 ==========
    function initCharts() {
      createChart1(); // 订单量 & 成交金额
      createChart2(); // 订单状态分布
    }
    
    // ========== 图表1：订单量 & 成交金额（双轴） ==========
    function createChart1() {
      const ctx = document.getElementById('chart1').getContext('2d');
      const data = dashboardData.trends.daily;
      
      charts.chart1 = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: data.map(d => d.date),
          datasets: [
            {
              type: 'bar',
              label: '订单量',
              data: data.map(d => d.orders),
              backgroundColor: 'rgba(59, 130, 246, 0.8)',
              yAxisID: 'y',
              order: 2
            },
            {
              type: 'line',
              label: '成交金额（万元）',
              data: data.map(d => d.gmv / 10000),
              borderColor: '#E2231A',
              borderWidth: 3,
              backgroundColor: 'rgba(226, 35, 26, 0.1)',
              tension: 0.4,
              yAxisID: 'y1',
              order: 1,
              pointRadius: 5,
              pointHoverRadius: 7,
              pointBackgroundColor: '#ffffff',
              pointBorderColor: '#E2231A',
              pointBorderWidth: 2,
              pointHoverBackgroundColor: '#E2231A',
              pointHoverBorderColor: '#ffffff',
              pointHoverBorderWidth: 3,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: {
            legend: { display: true, position: 'top' }
          },
          scales: {
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              title: { display: true, text: '订单量' }
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              title: { display: true, text: '成交金额（万元）' },
              grid: { drawOnChartArea: false }
            }
          }
        }
      });
    }
    
    // ========== 图表2：订单状态分布 ==========
    function createChart2() {
      const ctx = document.getElementById('chart2').getContext('2d');
      const data = dashboardData.orderFunnel;
      
      charts.chart2 = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: data.map(d => d.status),
          datasets: [{
            data: data.map(d => d.count),
            backgroundColor: [
              '#F59E0B', '#3B82F6', '#10B981', '#22C55E', '#94A3B8', '#EF4444'
            ]
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: true, position: 'right' },
            tooltip: {
              callbacks: {
                label: function(context) {
                  const label = context.label || '';
                  const value = context.parsed;
                  const percent = data[context.dataIndex].percent;
                  return `${label}: ${value} (${percent}%)`;
                }
              }
            }
          }
        }
      });
    }
    
    // ========== 切换时间粒度 ==========
    function switchPeriod(chartId, period) {
      currentPeriod = period;
      
      if (chartId === 'chart1') {
        // 更新按钮样式
        const btnDaily = document.getElementById('btnChart1Daily');
        const btnWeekly = document.getElementById('btnChart1Weekly');
        const btnMonthly = document.getElementById('btnChart1Monthly');
        const btnCustom = document.getElementById('btnChart1Custom');
        const picker = document.getElementById('chart1CustomPicker');
        
        // 重置所有按钮样式
        [btnDaily, btnWeekly, btnMonthly, btnCustom].forEach(btn => {
          if (btn) {
            btn.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
            btn.classList.add('bg-gray-200', 'text-gray-700', 'font-medium');
          }
        });
        
        // 设置选中按钮样式
        if (period === 'daily' && btnDaily) {
          btnDaily.classList.add('bg-blue-600', 'text-white', 'font-semibold');
          btnDaily.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
          if (picker) picker.classList.add('hidden');
        } else if (period === 'weekly' && btnWeekly) {
          btnWeekly.classList.add('bg-blue-600', 'text-white', 'font-semibold');
          btnWeekly.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
          if (picker) picker.classList.add('hidden');
        } else if (period === 'monthly' && btnMonthly) {
          btnMonthly.classList.add('bg-blue-600', 'text-white', 'font-semibold');
          btnMonthly.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
          if (picker) picker.classList.add('hidden');
        } else if (period === 'custom' && btnCustom) {
          btnCustom.classList.add('bg-blue-600', 'text-white', 'font-semibold');
          btnCustom.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
          if (picker) picker.classList.remove('hidden');
          return; // 自定义需要先选择日期
        }
        
        // 更新对应图表数据
        const data = dashboardData.trends[period];
        if (data && charts.chart1) {
          charts.chart1.data.labels = data.map(d => d.date);
          charts.chart1.data.datasets[0].data = data.map(d => d.orders);
          charts.chart1.data.datasets[1].data = data.map(d => d.gmv / 10000);
          charts.chart1.update();
        }
      }
    }
    
    // 应用图表1的自定义时间范围
    function applyChart1Custom() {
      const start = document.getElementById('chart1Start')?.value;
      const end = document.getElementById('chart1End')?.value;
      if (!start || !end) {
        alert('请选择开始和结束日期');
        return;
      }
      if (new Date(start) > new Date(end)) {
        alert('开始日期不能晚于结束日期');
        return;
      }
      
      // 演示：生成自定义时间范围的数据
      const days = Math.ceil((new Date(end) - new Date(start)) / (1000 * 60 * 60 * 24));
      const customData = Array.from({ length: Math.min(days, 30) }).map((_, i) => {
        const date = new Date(start);
        date.setDate(date.getDate() + i);
        return {
          date: `${date.getMonth() + 1}/${date.getDate()}`,
          orders: Math.floor(Math.random() * 50) + 80,
          gmv: Math.floor(Math.random() * 50000) + 100000
        };
      });
      
      if (charts.chart1) {
        charts.chart1.data.labels = customData.map(d => d.date);
        charts.chart1.data.datasets[0].data = customData.map(d => d.orders);
        charts.chart1.data.datasets[1].data = customData.map(d => d.gmv / 10000);
        charts.chart1.update();
      }
      
      alert(`已应用自定义时间范围：${start} 至 ${end}（演示数据）`);
    }
    
    // ========== 销售TOP：演示数据（默认按销售金额） ==========
    const salesTopMock = {
      week: {
        buyers: Array.from({ length: 10 }).map((_, i) => ({ name: `采购企业${i + 1}`, gmv: 120000 - i * 6500 })),
        suppliers: Array.from({ length: 10 }).map((_, i) => ({ name: `供应商${i + 1}`, gmv: 98000 - i * 5200 })),
        hotCategory: Array.from({ length: 10 }).map((_, i) => ({ name: `品类${i + 1}`, gmv: 76000 - i * 4100 })),
        hotProduct: Array.from({ length: 10 }).map((_, i) => ({ category2: `二级分类${(i % 5) + 1}`, name: `商品${i + 1}`, gmv: 52000 - i * 2600 }))
      },
      month: {
        buyers: Array.from({ length: 10 }).map((_, i) => ({ name: `采购企业${i + 1}`, gmv: 520000 - i * 26500 })),
        suppliers: Array.from({ length: 10 }).map((_, i) => ({ name: `供应商${i + 1}`, gmv: 430000 - i * 22000 })),
        hotCategory: Array.from({ length: 10 }).map((_, i) => ({ name: `品类${i + 1}`, gmv: 360000 - i * 17500 })),
        hotProduct: Array.from({ length: 10 }).map((_, i) => ({ category2: `二级分类${(i % 5) + 1}`, name: `商品${i + 1}`, gmv: 240000 - i * 12000 }))
      },
      year: {
        buyers: Array.from({ length: 10 }).map((_, i) => ({ name: `采购企业${i + 1}`, gmv: 5200000 - i * 265000 })),
        suppliers: Array.from({ length: 10 }).map((_, i) => ({ name: `供应商${i + 1}`, gmv: 4300000 - i * 220000 })),
        hotCategory: Array.from({ length: 10 }).map((_, i) => ({ name: `品类${i + 1}`, gmv: 3600000 - i * 175000 })),
        hotProduct: Array.from({ length: 10 }).map((_, i) => ({ category2: `二级分类${(i % 5) + 1}`, name: `商品${i + 1}`, gmv: 2400000 - i * 120000 }))
      },
      custom: {
        buyers: Array.from({ length: 10 }).map((_, i) => ({ name: `采购企业${i + 1}`, gmv: 260000 - i * 12500 })),
        suppliers: Array.from({ length: 10 }).map((_, i) => ({ name: `供应商${i + 1}`, gmv: 210000 - i * 9800 })),
        hotCategory: Array.from({ length: 10 }).map((_, i) => ({ name: `品类${i + 1}`, gmv: 180000 - i * 8200 })),
        hotProduct: Array.from({ length: 10 }).map((_, i) => ({ category2: `二级分类${(i % 5) + 1}`, name: `商品${i + 1}`, gmv: 120000 - i * 5600 }))
      }
    };
    
    function formatMoney(num) {
      const w = num / 10000;
      return `${w.toFixed(2)}万`;
    }
    
    // 生成排名徽章HTML
    function getRankBadge(rank) {
      const rankNum = rank + 1; // rank是0-based，需要+1
      if (rankNum === 1) {
        return '<div class="rank-badge rank-1" title="第1名"><i class="fas fa-trophy"></i></div>';
      } else if (rankNum === 2) {
        return '<div class="rank-badge rank-2" title="第2名"><i class="fas fa-medal"></i></div>';
      } else if (rankNum === 3) {
        return '<div class="rank-badge rank-3" title="第3名"><i class="fas fa-award"></i></div>';
      } else {
        return `<div class="rank-badge rank-${rankNum}">${rankNum}</div>`;
      }
    }
    
    function setSalesTopRange(range) {
      salesTopRange = range;
      const map = { week: 'btnTopWeek', month: 'btnTopMonth', year: 'btnTopYear', custom: 'btnTopCustom' };
      Object.keys(map).forEach(k => {
        const el = document.getElementById(map[k]);
        if (!el) return;
        if (k === range) {
          el.classList.add('bg-blue-600', 'text-white', 'font-semibold');
          el.classList.remove('bg-gray-200', 'text-gray-700', 'font-medium');
        } else {
          el.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
          el.classList.add('bg-gray-200', 'text-gray-700', 'font-medium');
        }
      });
      
      const picker = document.getElementById('salesTopCustomPicker');
      if (picker) {
        if (range === 'custom') picker.classList.remove('hidden');
        else picker.classList.add('hidden');
      }
      
      renderSalesTop();
    }
    
    function applySalesTopCustom() {
      const start = document.getElementById('salesTopStart')?.value;
      const end = document.getElementById('salesTopEnd')?.value;
      if (!start || !end) {
        alert('请选择开始和结束日期');
        return;
      }
      if (new Date(start) > new Date(end)) {
        alert('开始日期不能晚于结束日期');
        return;
      }
      alert(`已应用自定义时间范围：${start} 至 ${end}（演示数据）`);
      setSalesTopRange('custom');
    }
    
    
    function renderSalesTop() {
      const data = salesTopMock[salesTopRange] || salesTopMock.week;
      
      const buyerTbody = document.getElementById('topBuyerTbody');
      if (buyerTbody) {
        buyerTbody.innerHTML = data.buyers
          .sort((a, b) => b.gmv - a.gmv)
          .slice(0, 10)
          .map((it, idx) => {
            return `
            <tr>
              <td class="name-cell">
                <div class="flex items-center gap-2">
                  <span class="flex-shrink-0">${getRankBadge(idx)}</span>
                  <span>${it.name}</span>
                </div>
              </td>
              <td class="amount-cell">${formatMoney(it.gmv)}</td>
            </tr>
          `;
          }).join('');
      }
      
      const supplierTbody = document.getElementById('topSupplierTbody');
      if (supplierTbody) {
        supplierTbody.innerHTML = data.suppliers
          .sort((a, b) => b.gmv - a.gmv)
          .slice(0, 10)
          .map((it, idx) => {
            return `
            <tr>
              <td class="name-cell">
                <div class="flex items-center gap-2">
                  <span class="flex-shrink-0">${getRankBadge(idx)}</span>
                  <span>${it.name}</span>
                </div>
              </td>
              <td class="amount-cell">${formatMoney(it.gmv)}</td>
            </tr>
          `;
          }).join('');
      }
      
      renderCategoryTop();
      renderProductTop();
    }
    
    // 渲染热销品类TOP10
    function renderCategoryTop() {
      const data = salesTopMock[salesTopRange] || salesTopMock.week;
      const tbody = document.getElementById('topCategoryTbody');
      if (!tbody) return;
      
      tbody.innerHTML = data.hotCategory
        .sort((a, b) => b.gmv - a.gmv)
        .slice(0, 10)
        .map((it, idx) => {
          return `
          <tr>
            <td class="name-cell">
              <div class="flex items-center gap-2">
                <span class="flex-shrink-0">${getRankBadge(idx)}</span>
                <span>${it.name}</span>
              </div>
            </td>
            <td class="amount-cell">${formatMoney(it.gmv)}</td>
          </tr>
        `;
        }).join('');
    }
    
    // 渲染热销商品TOP10
    function renderProductTop() {
      const data = salesTopMock[salesTopRange] || salesTopMock.week;
      const tbody = document.getElementById('topProductTbody');
      if (!tbody) return;
      
      tbody.innerHTML = data.hotProduct
        .sort((a, b) => b.gmv - a.gmv)
        .slice(0, 10)
        .map((it, idx) => {
          return `
          <tr>
            <td class="name-cell">
              <div class="flex items-center gap-2">
                <span class="flex-shrink-0">${getRankBadge(idx)}</span>
                <span>${it.name}</span>
              </div>
            </td>
            <td class="amount-cell">${formatMoney(it.gmv)}</td>
          </tr>
        `;
        }).join('');
    }
    
    // ========== 刷新数据 ==========
    function refreshData() {
      alert('刷新数据功能（演示）：真实环境中会重新请求API获取最新数据');
      location.reload();
    }
    
    // ========== 导出数据 ==========
    function exportData() {
      alert('导出数据功能（演示）：真实环境中会生成CSV/Excel文件下载');
    }
    
    // ========== 页面跳转（模拟） ==========
    function navigateTo(page) {
      console.log('Navigate to:', page);
      alert(`跳转到：${page}（演示中，真实环境会跳转到对应页面）`);
    }
    
    // ========== 切换侧边栏收起/展开 ==========
    function toggleAdminSidebar() {
      const sidebar = document.getElementById('adminSidebar');
      const icon = document.getElementById('sidebarToggleIcon');
      sidebar.classList.toggle('collapsed');
      
      if (sidebar.classList.contains('collapsed')) {
        icon.classList.remove('fa-chevron-left');
        icon.classList.add('fa-chevron-right');
      } else {
        icon.classList.remove('fa-chevron-right');
        icon.classList.add('fa-chevron-left');
      }
      
      // 保存状态到 localStorage
      localStorage.setItem('adminSidebarCollapsed', sidebar.classList.contains('collapsed'));
    }
    
    // ========== 处理菜单点击 ==========
    function handleMenuClick(element, page) {
      event.preventDefault();
      
      // 更新活动状态
      document.querySelectorAll('.admin-menu-item').forEach(item => {
        item.classList.remove('active');
      });
      element.classList.add('active');
      
      // 已实现的页面直接跳转
      if (page === 'admin_dashboard.html' || page === 'admin_reco_manage.html') {
        window.location.href = page;
      } else {
        // 未实现的页面显示提示
        alert(`页面 "${page}" 尚未开发，敬请期待！`);
      }
    }
    
    // ========== 初始化侧边栏状态 ==========
    document.addEventListener('DOMContentLoaded', function() {
      const savedState = localStorage.getItem('adminSidebarCollapsed');
      if (savedState === 'true') {
        const sidebar = document.getElementById('adminSidebar');
        const icon = document.getElementById('sidebarToggleIcon');
        sidebar.classList.add('collapsed');
        icon.classList.remove('fa-chevron-left');
        icon.classList.add('fa-chevron-right');
      }
    });
  </script>
  
</body>
</html>
