<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>首页 | 阳光优采</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="../assets/custom.css">
  
  <style>
    :root { --color-primary: #E2231A; --color-primary-hover: #c01e16; }
    .text-primary { color: #E2231A; }
    .bg-primary { background-color: #E2231A; }
    .border-primary { border-color: #E2231A; }
    
    .top-dark { background: #3d4451; color: #e5e7eb; }
    .top-red { background: linear-gradient(135deg, #E2231A 0%, #c01e16 100%); }
    
    .product-card { transition: all 0.25s ease; border: 1px solid #e5e7eb; }
    .product-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); border-color: #E2231A; }
    
    .cat-left { background: linear-gradient(180deg, #fff5f4 0%, #fff 100%); border: 1px solid #fde2e0; }
    .cat-item:hover { background: #ffebe9; color: #E2231A; }
    .cat-item.active { background: #ffebe9; color: #E2231A; font-weight: 600; border-left: 3px solid #E2231A; }
    
    .reco-panel { background: #4a5568; color: #fff; }
    .reco-panel.sec2 { background: #6b5b4f; }
    .tab-2nd { transition: all 0.2s; }
    .tab-2nd.active { background: #E2231A; color: #fff; }
    .tab-2nd:not(.active) { background: #f3f4f6; color: #374151; }
    .tab-2nd:not(.active):hover { background: #e5e7eb; }
    
    .float-menu { position: fixed; right: 16px; top: 50%; transform: translateY(-50%); z-index: 500; }
    .float-item { width: 60px; min-height: 60px; border-radius: 4px; background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.12); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px 4px; gap: 4px; }
    .float-item:hover { background: #E2231A; color: #fff; }
    .float-item i { font-size: 18px; }
    .float-item span { font-size: 11px; line-height: 1.2; }
    
    .search-input:focus { outline: none; border-color: #E2231A; box-shadow: 0 0 0 2px rgba(226,35,26,0.15); }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;">
  
  <!-- ==================== 顶部暗色条 ==================== -->
  <div class="top-dark text-sm">
    <div class="max-w-[1400px] mx-auto px-4 h-9 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <span id="topGreet">您好，请登录</span>
        <a href="#" class="hover:text-white" onclick="showLogin(); return false;">登录</a>
        <a href="#" class="hover:text-white" onclick="return false;">注册</a>
      </div>
      <div class="flex items-center gap-6">
        <a href="home.html" class="text-white font-medium">首页</a>
        <a href="workbench/workbench_home.html" class="hover:text-white">我的工作台</a>
        <a href="#" class="hover:text-white" onclick="return false;">采购指南</a>
        <span class="text-gray-400">客服电话：400-XXX-XXXX</span>
        <div class="flex items-center gap-2">
          <label class="text-gray-400 text-xs">角色：</label>
          <select id="roleSelect" class="px-2 py-1 border border-gray-500 rounded text-xs bg-transparent text-gray-300 focus:outline-none focus:ring-1 focus:ring-white" onchange="switchRole(this.value)">
            <option value="guest">访客</option>
            <option value="buyer-user">普通采购用户</option>
            <option value="buyer">采购专员</option>
            <option value="supplier">供应商</option>
            <option value="admin">平台管理员</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ==================== 红色主栏：Logo + 搜索 ==================== -->
  <div class="top-red text-white">
    <div class="max-w-[1400px] mx-auto px-4 py-4">
      <div class="flex items-center justify-center relative">
        <a href="home.html" class="absolute left-4 flex items-center gap-3">
          <div class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center"><i class="fas fa-sun text-xl"></i></div>
          <div>
            <div class="text-xl font-bold">阳光优采</div>
            <div class="text-xs text-white/80">SUNSHINE PROCUREMENT</div>
          </div>
        </a>
        <div class="flex items-center max-w-2xl w-full">
          <select class="h-10 px-5 pr-8 bg-white text-gray-700 rounded-l-lg border-0 text-sm min-w-[100px]" id="searchType" style="background-image: url('data:image/svg+xml;charset=UTF-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'12\' height=\'12\' viewBox=\'0 0 12 12\'%3E%3Cpath fill=\'%236B7280\' d=\'M6 9L1 4h10z\'/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: right 10px center;">
            <option value="product">商品</option>
            <option value="store">店铺</option>
          </select>
          <input type="text" id="searchInput" placeholder="请输入您想查找的商品" class="flex-1 h-10 px-4 text-gray-900 search-input rounded-none text-sm" onkeypress="if(event.key==='Enter')handleSearch()">
          <button type="button" onclick="handleSearch()" class="h-10 px-6 bg-white text-primary rounded-r-lg font-medium hover:bg-gray-50 transition-colors"><i class="fas fa-search mr-1"></i>搜索</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ==================== 二级导航 ==================== -->
  <div class="bg-white border-b border-gray-200">
    <div class="max-w-[1400px] mx-auto px-4">
      <div class="flex items-center gap-8 h-11">
        <a href="home.html" class="text-primary font-semibold border-b-2 border-primary -mb-[1px] pb-3 pt-1">首页</a>
        <a href="#" class="text-gray-600 hover:text-primary" onclick="return false;">智能匹配</a>
      </div>
    </div>
  </div>
  
  <!-- ==================== 主内容区（上方：分类+横幅+登录） ==================== -->
  <div class="max-w-[1400px] mx-auto px-4 py-4">
    <div class="flex gap-4">
      <!-- 左侧：商品分类 -->
      <aside class="w-52 shrink-0 cat-left rounded-lg overflow-hidden">
        <a href="#" class="block py-3 px-4 bg-primary text-white text-center font-medium hover:bg-primary/90" onclick="return false;"><i class="fas fa-shopping-bag mr-2"></i>全部商品</a>
        <nav class="py-2">
          <a href="#" class="cat-item active block py-2.5 px-4 text-sm border-l-2 border-transparent" data-cat="office" onclick="return false;"><i class="fas fa-print w-5 text-center mr-1 text-gray-500"></i>办公用品、电脑数码</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" data-cat="safety" onclick="return false;"><i class="fas fa-hard-hat w-5 text-center mr-1 text-gray-500"></i>个人防护、安全防护</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-toolbox w-5 text-center mr-1 text-gray-500"></i>工具耗材、机床数控</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-spray-can w-5 text-center mr-1 text-gray-500"></i>清洁用品、清洁设备</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-bolt w-5 text-center mr-1 text-gray-500"></i>电气工控、工业自动</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-cog w-5 text-center mr-1 text-gray-500"></i>机械流体、紧固密封</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-industry w-5 text-center mr-1 text-gray-500"></i>工业设备、仓储照明</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-ruler-combined w-5 text-center mr-1 text-gray-500"></i>测量检测、仪器仪表</a>
          <a href="#" class="cat-item block py-2.5 px-4 text-sm" onclick="return false;"><i class="fas fa-wrench w-5 text-center mr-1 text-gray-500"></i>焊接切割、五金农林</a>
          <a href="#" class="block py-2 px-4 text-xs text-gray-400 hover:text-primary" onclick="return false;"><i class="fas fa-chevron-down mr-1"></i>更多分类</a>
        </nav>
      </aside>
      
      <!-- 中间：促销横幅 -->
      <main class="flex-1 min-w-0">
        <div class="bg-gradient-to-r from-orange-500 via-red-500 to-red-600 rounded-lg p-6 text-white overflow-hidden relative">
          <div class="relative z-10">
            <h2 class="text-xl font-bold mb-1">阳光优采平台上线啦！</h2>
            <p class="text-white/95 text-sm mb-2">依托一物一码体系 · 开启比质比价新模式</p>
            <div class="flex gap-2 mb-3">
              <span class="px-3 py-1 bg-white/20 rounded text-xs">精细化</span>
              <span class="px-3 py-1 bg-white/20 rounded text-xs">一键化</span>
              <span class="px-3 py-1 bg-white/20 rounded text-xs">智能化</span>
            </div>
          </div>
          <div class="absolute right-4 top-1/2 -translate-y-1/2 opacity-20 text-6xl"><i class="fas fa-boxes"></i></div>
        </div>
      </main>
      
      <!-- 右侧：登录/注册 -->
      <aside class="w-56 shrink-0">
        <div class="bg-white rounded-lg border border-gray-200 p-4">
          <p class="text-gray-700 mb-3">Hi~欢迎登录平台</p>
          <div class="flex gap-2">
            <button type="button" class="flex-1 py-2 bg-primary text-white text-sm rounded hover:bg-primary/90" onclick="showLogin()">登录</button>
            <button type="button" class="flex-1 py-2 border border-primary text-primary text-sm rounded hover:bg-red-50" onclick="return false;">注册</button>
          </div>
          <div class="mt-4 pt-4 border-t border-gray-100 grid grid-cols-3 gap-2 text-center text-xs text-gray-500">
            <a href="workbench/workbench_home.html" class="hover:text-primary"><i class="fas fa-tachometer-alt block mb-1 text-base"></i>工作台</a>
            <a href="#" class="hover:text-primary" onclick="return false;"><i class="fas fa-file-alt block mb-1 text-base"></i>平台规则</a>
            <a href="#" class="hover:text-primary" onclick="return false;"><i class="fas fa-book block mb-1 text-base"></i>采购指南</a>
          </div>
        </div>
      </aside>
    </div>
  </div>
  
  <!-- ==================== 分类推荐区（下方独立区域，全宽） ==================== -->
  <div class="max-w-[1400px] mx-auto px-4 pb-4">
    <!-- 分类推荐 1：办公用品 电脑数码 -->
    <section class="bg-white rounded-lg border border-gray-200 overflow-hidden mb-4">
      <div class="font-semibold text-gray-900 px-4 py-3 border-b border-gray-100">分类推荐</div>
      <div class="flex">
        <div class="reco-panel w-56 shrink-0 flex flex-col justify-between p-4">
          <div>
            <h3 class="text-lg font-bold text-white mb-2">办公用品 电脑数码</h3>
            <div class="w-24 h-24 mx-auto my-4 bg-white/10 rounded flex items-center justify-center"><i class="fas fa-print text-4xl text-white/90"></i></div>
          </div>
          <a href="#" class="block w-full py-2 text-center bg-primary text-white text-sm rounded hover:bg-primary/90" onclick="return false;">查看更多 <i class="fas fa-chevron-right text-xs"></i></a>
        </div>
        <div class="flex-1 p-4">
          <div class="flex flex-wrap items-center gap-2 mb-3">
            <button type="button" class="tab-2nd active px-4 py-2 rounded text-sm" data-block="0" data-tab="all">全部</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="0" data-tab="paper">复印纸</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="0" data-tab="printer">打印机</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="0" data-tab="file">文件管理</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="0" data-tab="write">书写/修正用品</button>
            <a href="#" class="ml-auto px-4 py-2 text-primary text-sm font-medium hover:underline" onclick="return false;">查看更多</a>
          </div>
          <div class="grid grid-cols-5 gap-3" id="recoProducts0">
            <!-- 5 个商品卡片由 JS 渲染 -->
          </div>
        </div>
      </div>
    </section>
    
    <!-- 分类推荐 2：个人防护 安全防护 -->
    <section class="bg-white rounded-lg border border-gray-200 overflow-hidden">
      <div class="flex">
        <div class="reco-panel sec2 w-56 shrink-0 flex flex-col justify-between p-4">
          <div>
            <h3 class="text-lg font-bold text-white mb-2">个人防护 安全防护</h3>
            <div class="w-24 h-24 mx-auto my-4 bg-white/10 rounded flex items-center justify-center"><i class="fas fa-hard-hat text-4xl text-white/90"></i></div>
          </div>
          <a href="#" class="block w-full py-2 text-center bg-primary text-white text-sm rounded hover:bg-primary/90" onclick="return false;">查看更多 <i class="fas fa-chevron-right text-xs"></i></a>
        </div>
        <div class="flex-1 p-4">
          <div class="flex flex-wrap items-center gap-2 mb-3">
            <button type="button" class="tab-2nd active px-4 py-2 rounded text-sm" data-block="1" data-tab="all">全部</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="1" data-tab="head">头部防护</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="1" data-tab="resp">呼吸防护</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="1" data-tab="hand">手部防护</button>
            <button type="button" class="tab-2nd px-4 py-2 rounded text-sm" data-block="1" data-tab="road">道路安全</button>
            <a href="#" class="ml-auto px-4 py-2 text-primary text-sm font-medium hover:underline" onclick="return false;">查看更多</a>
          </div>
          <div class="grid grid-cols-5 gap-3" id="recoProducts1">
            <!-- 5 个商品卡片由 JS 渲染 -->
          </div>
        </div>
      </div>
    </section>
  </div>
  
  <!-- ==================== 浮动菜单 ==================== -->
  <div class="float-menu flex flex-col gap-2 no-print">
    <a href="#" class="float-item text-gray-600" title="我的" onclick="return false;">
      <i class="fas fa-user"></i>
      <span>我的</span>
    </a>
    <a href="#" class="float-item text-gray-600 relative" title="购物车" onclick="return false;">
      <i class="fas fa-shopping-cart"></i>
      <span>购物车</span>
      <span id="cartBadge" class="absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center bg-primary text-white text-[10px] rounded-full hidden">0</span>
    </a>
    <a href="#" class="float-item text-gray-600" title="返回顶部" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">
      <i class="fas fa-chevron-up"></i>
      <span>返回顶部</span>
    </a>
  </div>
  
  <script>
    // ---------- Mock：分类推荐商品 ----------
    const recoMock = {
      0: { // 办公用品 电脑数码
        all: [
          { id: 1, name: 'FUJIFILM/富士胶片 A4黑白激光打印机 ApeosPort Print  C4572', price: 1653.46, unit: '台', supplier: '震坤行工业超市(上海)有限公司', ref: 1986.35, img: 'https://images.unsplash.com/photo-1612815154858-60aa4c59eaa6?w=400&h=300&fit=crop' },
          { id: 2, name: '晨光 M&G 中性笔 GP1163(盒) 0.5mm 中性笔 黑色 12支/盒', price: 19.46, unit: '盒', supplier: '咸亨国际科技股份有限公司', ref: 24.94, img: 'https://images.unsplash.com/photo-1585338107529-13afc5f02586?w=400&h=300&fit=crop' },
          { id: 3, name: '天章复印纸 A5 80g 白色 500张/包 10包/箱 新绿天章', price: 123, unit: '件', supplier: '苏宁易购集团股份有限公司', ref: 139.67, img: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=400&h=300&fit=crop' },
          { id: 4, name: '齐心 C3674-5 A4复印纸白色 70g 500张/包 白色/70g/50', price: 25.92, unit: '包', supplier: '鑫方盛数智科技股份有限公司', ref: 33.87, img: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=400&h=300&fit=crop' },
          { id: 9, name: '得力 文件夹 A4 文件袋 资料袋 透明塑料文件夹 10个装', price: 28.50, unit: '套', supplier: '得力集团股份有限公司', ref: 35.80, img: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=400&h=300&fit=crop' },
          { id: 10, name: '惠普 HP LaserJet Pro 激光打印机 无线打印 自动双面', price: 1899.00, unit: '台', supplier: '惠普(中国)有限公司', ref: 2299.00, img: 'https://images.unsplash.com/photo-1612815154858-60aa4c59eaa6?w=400&h=300&fit=crop' }
        ],
        paper: [ 2, 3, 4, 1, 9 ], printer: [ 1, 10, 2, 3, 4 ], file: [ 9, 3, 4, 1, 2 ], write: [ 2, 4, 1, 9, 3 ]
      },
      1: { // 个人防护 安全防护
        all: [
          { id: 5, name: '唐丰 安全帽 TF/唐丰ABS-V 安全帽 蓝 售卖规格:1顶', price: 17.70, unit: '顶', supplier: '西域智慧供应链(上海)股份公司', ref: 19.09, img: 'https://images.unsplash.com/photo-1582555172866-f73bb12a2ab3?w=400&h=300&fit=crop' },
          { id: 6, name: 'CM/朝美 含活性炭颗粒物防护口罩 活性炭净化加厚型口罩', price: 1.24, unit: '只', supplier: '震坤行工业超市(上海)有限公司', ref: 1.44, img: 'https://images.unsplash.com/photo-1584036561566-baf8f5f1b34b?w=400&h=300&fit=crop' },
          { id: 7, name: '星宇 劳保手套300#毛圈加绒加厚pvc浸胶发泡防滑防水耐', price: 59.10, unit: '双', supplier: '欧菲斯集团股份有限公司', ref: 59.41, img: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=300&fit=crop' },
          { id: 8, name: '安赛瑞 310075 安赛瑞基坑护栏网 建筑工地施工围栏隔离', price: 239, unit: '个', supplier: '深圳市怡亚通供应链股份有限公司', ref: 288.76, img: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&h=300&fit=crop' },
          { id: 11, name: '3M 防护眼镜 防冲击护目镜 防雾防尘 工业安全眼镜', price: 45.80, unit: '副', supplier: '3M中国有限公司', ref: 58.00, img: 'https://images.unsplash.com/photo-1582555172866-f73bb12a2ab3?w=400&h=300&fit=crop' },
          { id: 12, name: '霍尼韦尔 防尘口罩 KN95 防护口罩 50只装', price: 89.90, unit: '盒', supplier: '霍尼韦尔(中国)有限公司', ref: 109.90, img: 'https://images.unsplash.com/photo-1584036561566-baf8f5f1b34b?w=400&h=300&fit=crop' }
        ],
        head: [ 5, 11, 6, 7, 8 ], resp: [ 6, 12, 5, 7, 8 ], hand: [ 7, 5, 6, 8, 11 ], road: [ 8, 5, 6, 7, 12 ]
      }
    };
    
    function getProductByBlockIndex(block, tab) {
      const d = recoMock[block];
      if (tab === 'all' || !d[tab]) return d.all.slice(0, 5);
      return d[tab].map(id => d.all.find(p => p.id === id)).filter(Boolean).slice(0, 5);
    }
    
    function renderProductCard(p) {
      return `<a href="#" class="product-card block rounded-lg p-3 bg-white" onclick="return false;">
        <div class="aspect-[16/10] rounded overflow-hidden bg-gray-100 mb-2"><img src="${p.img}" alt="" class="w-full h-full object-cover" loading="lazy"></div>
        <div class="text-gray-900 text-sm line-clamp-2 leading-snug mb-1">${p.name}</div>
        <div class="text-primary font-semibold mb-1">¥${p.price.toFixed(2)} 元/${p.unit}</div>
        <div class="text-xs text-gray-500 mb-1"><i class="fas fa-crown text-amber-500 mr-1"></i>${p.supplier}</div>
        <div class="flex items-center gap-2">
          <div class="flex-1 h-1.5 bg-gray-200 rounded overflow-hidden"><div class="h-full w-3/4 bg-green-500 rounded"></div></div>
          <span class="text-xs text-gray-400 line-through">¥${(p.ref||0).toFixed(2)}</span>
        </div>
      </a>`;
    }
    
    function renderBlock(blockId) {
      const tab = document.querySelector(`[data-block="${blockId}"].tab-2nd.active`)?.dataset.tab || 'all';
      const list = getProductByBlockIndex(Number(blockId), tab);
      const el = document.getElementById('recoProducts' + blockId);
      if (el) el.innerHTML = list.map(renderProductCard).join('');
    }
    
    // 二级分类标签切换
    document.querySelectorAll('.tab-2nd').forEach(btn => {
      btn.addEventListener('click', function() {
        const block = this.dataset.block;
        this.parentElement.querySelectorAll('.tab-2nd').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        renderBlock(block);
      });
    });
    
    function handleSearch() {
      const type = document.getElementById('searchType').value;
      const kw = (document.getElementById('searchInput').value || '').trim();
      if (type === 'store' && kw) { window.location.href = 'store/store_list.html?keyword=' + encodeURIComponent(kw); return; }
      if (type === 'product') { window.location.href = '#'; /* category.html?q= */ return; }
    }
    
    function showLogin() { alert('原型演示：登录功能暂未实现'); }
    
    function getCurrentRole() { return localStorage.getItem('role') || 'guest'; }
    function switchRole(v) { localStorage.setItem('role', v); updateGreet(); }
    function updateGreet() {
      var r = getCurrentRole();
      var greet = document.getElementById('topGreet');
      if (r === 'guest') { if (greet) greet.textContent = '您好，请登录'; } 
      else { if (greet) greet.textContent = '张三（' + (r==='buyer'?'采购专员':r==='buyer-user'?'普通采购用户':r==='supplier'?'供应商':'管理员') + '）'; }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      var r = getCurrentRole();
      var sel = document.getElementById('roleSelect'); if (sel) sel.value = r;
      updateGreet();
      renderBlock(0);
      renderBlock(1);
    });
  </script>
</body>
</html>
