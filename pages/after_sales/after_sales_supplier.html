<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>售后处理 - 供应商工作台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../assets/custom.css">
    <style>
        .tab-active {
            border-bottom: 2px solid #E1251B;
            color: #E1251B;
            font-weight: 600;
        }
        .status-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        .status-pending { background: #FFF7ED; color: #C2410C; border: 1px solid #FFEDD5; }
        .status-return { background: #EEF2FF; color: #4338CA; border: 1px solid #E0E7FF; }
        .status-shipping { background: #ECFDF5; color: #047857; border: 1px solid #D1FAE5; }
        .status-completed { background: #F3F4F6; color: #374151; border: 1px solid #E5E7EB; }
        .status-terminated { background: #FEF2F2; color: #991B1B; border: 1px solid #FEE2E2; }
        .flowchart-collapse {
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .flowchart-collapse.collapsed {
            max-height: 0;
            opacity: 0;
        }
        .flowchart-collapse.expanded {
            max-height: 5000px;
            opacity: 1;
        }
        .flow-stage {
            margin-bottom: 30px;
        }
        .stage-box {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .stage-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f1f5f9;
        }
        .stage-number {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #E1251B 0%, #c01e16 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }
        .stage-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        .action-box {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px;
        }
        .action-title {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .action-btn {
            padding: 4px 10px;
            background: white;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            font-size: 11px;
            color: #475569;
        }
        .action-btn-primary {
            background: #E1251B;
            color: white;
            border-color: #E1251B;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <!-- 面包屑 -->
    <nav class="flex mb-4 text-sm text-gray-500">
        <ol class="inline-flex items-center space-x-1">
            <li><i class="fas fa-store mr-2"></i>供应商工作台</li>
            <li><i class="fas fa-chevron-right mx-2 text-gray-400"></i>售后管理</li>
        </ol>
    </nav>

    <!-- 标题 -->
    <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center text-white">
                <i class="fas fa-hand-holding-heart text-xl"></i>
            </div>
            <h1 class="text-2xl font-bold text-gray-900">售后处理中心</h1>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="toggleFlowchart()" class="bg-yellow-400 text-white px-4 py-2 rounded hover:bg-yellow-500 transition-all flex items-center gap-2 font-semibold shadow-sm">
                <i class="fas fa-sitemap"></i> 退货业务流程
            </button>
            <div class="text-sm text-gray-500">
                待处理申请：<span class="text-primary font-bold">3</span> 条
            </div>
        </div>
    </div>

    <!-- 业务流程模块（可折叠） -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 overflow-hidden hidden" id="flowchartModule">
        <div class="px-6 py-4 bg-gray-50 cursor-pointer flex items-center justify-between border-b border-gray-200" onclick="toggleFlowchartContent()">
            <div class="flex items-center gap-3">
                <i class="fas fa-sitemap text-primary text-xl"></i>
                <h2 class="text-lg font-semibold text-gray-900">退货业务流程详情</h2>
            </div>
            <i class="fas fa-chevron-down transition-transform duration-300 text-gray-500" id="flowchartIcon"></i>
        </div>
        <div class="flowchart-collapse collapsed" id="flowchartContent">
            <div class="p-6 bg-gray-50">
                <!-- 阶段1：待确认 -->
                <div class="flow-stage">
                    <div class="stage-box">
                        <div class="stage-header">
                            <div class="stage-number">1</div>
                            <div class="text-base font-semibold text-gray-900">申请阶段 - 待确认</div>
                            <span class="status-badge status-pending ml-auto">待确认</span>
                        </div>
                        <div class="stage-actions">
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-user-tie text-blue-600"></i>
                                    采购专员操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看信息</span>
                                    <span class="action-btn action-btn-primary">取消退货</span>
                                </div>
                            </div>
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-store text-green-600"></i>
                                    供应商操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn action-btn-primary">同意退货</span>
                                    <span class="action-btn action-btn-primary">驳回退货</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-600">
                            <i class="fas fa-info-circle text-primary"></i>
                            <strong>流转规则：</strong>供应商同意→待退货；驳回/取消→已终止
                        </div>
                    </div>
                </div>

                <div class="text-center my-4 text-gray-400">
                    <i class="fas fa-arrow-down"></i>
                </div>

                <!-- 阶段2：待退货 -->
                <div class="flow-stage">
                    <div class="stage-box">
                        <div class="stage-header">
                            <div class="stage-number">2</div>
                            <div class="text-base font-semibold text-gray-900">寄回阶段 - 待退货</div>
                            <span class="status-badge status-return ml-auto">待退货</span>
                        </div>
                        <div class="stage-actions">
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-user-tie text-blue-600"></i>
                                    采购专员操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看信息</span>
                                    <span class="action-btn action-btn-primary">上传物流单号</span>
                                </div>
                            </div>
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-store text-green-600"></i>
                                    供应商操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看信息（等待寄回）</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-600">
                            <i class="fas fa-info-circle text-primary"></i>
                            <strong>流转规则：</strong>采购方上传单号→退货中
                        </div>
                    </div>
                </div>

                <div class="text-center my-4 text-gray-400">
                    <i class="fas fa-arrow-down"></i>
                </div>

                <!-- 阶段3：退货中 -->
                <div class="flow-stage">
                    <div class="stage-box">
                        <div class="stage-header">
                            <div class="stage-number">3</div>
                            <div class="text-base font-semibold text-gray-900">在途阶段 - 退货中</div>
                            <span class="status-badge status-shipping ml-auto">退货中</span>
                        </div>
                        <div class="stage-actions">
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-user-tie text-blue-600"></i>
                                    采购专员操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看进度（物流跟踪）</span>
                                </div>
                            </div>
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-store text-green-600"></i>
                                    供应商操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看退货</span>
                                    <span class="action-btn action-btn-primary">确认签收商品</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-600">
                            <i class="fas fa-info-circle text-primary"></i>
                            <strong>流转规则：</strong>供应商确认签收→退货完成
                        </div>
                    </div>
                </div>

                <div class="text-center my-4 text-gray-400">
                    <i class="fas fa-arrow-down"></i>
                </div>

                <!-- 阶段4：退货完成 -->
                <div class="flow-stage">
                    <div class="stage-box">
                        <div class="stage-header">
                            <div class="stage-number">4</div>
                            <div class="text-base font-semibold text-gray-900">结案阶段 - 退货完成</div>
                            <span class="status-badge status-completed ml-auto">退货完成</span>
                        </div>
                        <div class="stage-actions">
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-user-tie text-blue-600"></i>
                                    采购专员操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看结果</span>
                                    <span class="action-btn">重新提交</span>
                                </div>
                            </div>
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-store text-green-600"></i>
                                    供应商操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn">查看结果</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-600">
                            <i class="fas fa-info-circle text-primary"></i>
                            <strong>流转规则：</strong>流程闭环，不可操作
                        </div>
                    </div>
                </div>

                <!-- 阶段5：已终止 -->
                <div class="flow-stage mt-4">
                    <div class="stage-box" style="background: #fef2f2; border-color: #fecaca;">
                        <div class="stage-header">
                            <div class="stage-number" style="background: #991B1B;">5</div>
                            <div class="text-base font-semibold text-gray-900">关闭阶段 - 已终止</div>
                            <span class="status-badge status-terminated ml-auto">已终止</span>
                        </div>
                        <div class="stage-actions">
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-user-tie text-blue-600"></i>
                                    采购专员操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn" style="opacity: 0.6;">查看信息</span>
                                </div>
                            </div>
                            <div class="action-box">
                                <div class="action-title">
                                    <i class="fas fa-store text-green-600"></i>
                                    供应商操作
                                </div>
                                <div class="action-buttons">
                                    <span class="action-btn" style="opacity: 0.6;">查看信息</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-gray-600">
                            <i class="fas fa-info-circle text-red-600"></i>
                            <strong>流转规则：</strong>流程结束，不可操作（可由待确认状态驳回/取消进入）
                        </div>
                    </div>
                </div>

                <!-- 关键规则说明 -->
                <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                    <div class="font-semibold text-yellow-800 mb-2 flex items-center gap-2">
                        <i class="fas fa-lightbulb"></i> 关键业务规则说明
                    </div>
                    <div class="text-xs text-yellow-700 space-y-1">
                        <p><strong>1. 单向流转：</strong>流程严格遵循 待确认 → 待退货 → 退货中 → 退货完成 的顺序。</p>
                        <p><strong>2. 供应商控制权：</strong>供应商拥有"同意/驳回"和"确认签收"的核心控制权。</p>
                        <p><strong>3. 不可逆性：</strong>一旦进入"退货完成"状态，系统将锁定操作，不再提供"取消退货"按钮。</p>
                        <p><strong>4. 异常处理：</strong>若被驳回或自行取消，单据进入"已终止"状态，需重新发起申请。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 状态页签 -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
        <div class="flex border-b border-gray-100 overflow-x-auto">
            <button onclick="switchTab('all')" class="px-6 py-4 text-sm tab-active whitespace-nowrap" id="tab-all">全部 (15)</button>
            <button onclick="switchTab('pending')" class="px-6 py-4 text-sm text-gray-500 hover:text-primary whitespace-nowrap" id="tab-pending">待确认 (3)</button>
            <button onclick="switchTab('return')" class="px-6 py-4 text-sm text-gray-500 hover:text-primary whitespace-nowrap" id="tab-return">待退货 (3)</button>
            <button onclick="switchTab('shipping')" class="px-6 py-4 text-sm text-gray-500 hover:text-primary whitespace-nowrap" id="tab-shipping">退货中 (3)</button>
            <button onclick="switchTab('completed')" class="px-6 py-4 text-sm text-gray-500 hover:text-primary whitespace-nowrap" id="tab-completed">退货完成 (3)</button>
            <button onclick="switchTab('terminated')" class="px-6 py-4 text-sm text-gray-500 hover:text-primary whitespace-nowrap" id="tab-terminated">已终止 (3)</button>
        </div>

        <!-- 搜索 -->
        <div class="p-4 flex gap-4 bg-gray-50">
            <div class="flex-1 relative">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                <input type="text" placeholder="搜索退货单号/订单号/采购单位" class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg">
            </div>
            <button class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 transition-all">查询</button>
        </div>
    </div>

    <!-- 列表 -->
    <div class="space-y-4">
        <!-- ========== 待确认状态（3条） ========== -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="pending">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260114001</span>
                    <span class="mx-3">|</span>
                    采购方：阳光地产集团采购部
                    <span class="mx-3">|</span>
                    申请时间：2026-01-14 10:25
                </div>
                <div class="status-badge status-pending">待确认</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1544450173-8c486e1f98d6?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">佳能(Canon) LBP6230dn A4黑白激光打印机</h4>
                    <p class="text-xs text-red-500 mt-1">申请原因：商品描述不符，不支持自动双面</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥1,299.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-primary text-white text-sm rounded hover:bg-opacity-90" onclick="handleApply(true)">同意退货</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50" onclick="handleApply(false)">驳回申请</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="pending">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260114002</span>
                    <span class="mx-3">|</span>
                    采购方：晨光科技股份有限公司
                    <span class="mx-3">|</span>
                    申请时间：2026-01-14 08:15
                </div>
                <div class="status-badge status-pending">待确认</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">晨光(M&G) A4复印纸 70g 500张/包</h4>
                    <p class="text-xs text-red-500 mt-1">申请原因：商品质量问题，纸张有破损</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥180.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-primary text-white text-sm rounded hover:bg-opacity-90" onclick="handleApply(true)">同意退货</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50" onclick="handleApply(false)">驳回申请</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="pending">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260113099</span>
                    <span class="mx-3">|</span>
                    采购方：得力办公用品采购中心
                    <span class="mx-3">|</span>
                    申请时间：2026-01-13 16:42
                </div>
                <div class="status-badge status-pending">待确认</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1586953208448-b95a79798f07?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">得力(deli) 5028 透明胶带 48mm×50m</h4>
                    <p class="text-xs text-red-500 mt-1">申请原因：数量发错，实际收到数量不足</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥96.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-primary text-white text-sm rounded hover:bg-opacity-90" onclick="handleApply(true)">同意退货</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50" onclick="handleApply(false)">驳回申请</button>
                </div>
            </div>
        </div>

        <!-- ========== 待退货状态（3条） ========== -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="return">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260113052</span>
                    <span class="mx-3">|</span>
                    采购方：晨光文具旗舰店
                    <span class="mx-3">|</span>
                    申请时间：2026-01-13 14:15
                </div>
                <div class="status-badge status-return">待退货</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1512412023212-f09999392ef5?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">得力(deli) 0130 强力型订书机 50页厚层</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：商品型号不符</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥225.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="return">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260112088</span>
                    <span class="mx-3">|</span>
                    采购方：鼎盛办公用品采购部
                    <span class="mx-3">|</span>
                    申请时间：2026-01-12 11:30
                </div>
                <div class="status-badge status-return">待退货</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1563453392212-326f5e854473?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">惠普(HP) LaserJet Pro M404dn 黑白激光打印机</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：商品功能缺陷，无法正常使用</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥2,199.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="return">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260111077</span>
                    <span class="mx-3">|</span>
                    采购方：得力办公专营店
                    <span class="mx-3">|</span>
                    申请时间：2026-01-11 09:20
                </div>
                <div class="status-badge status-return">待退货</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1586953208448-b95a79798f07?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">得力(deli) 5028 透明胶带 48mm×50m</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：商品质量问题，粘性不足</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥72.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <!-- ========== 退货中状态（3条） ========== -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="shipping">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260111008</span>
                    <span class="mx-3">|</span>
                    采购方：长城科技集团
                    <span class="mx-3">|</span>
                    物流：顺丰速运 (SF14322588960)
                </div>
                <div class="status-badge status-shipping">退货中</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1586075010623-265d1d6c76f2?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">A4 复印纸 80g 500张/包 5包/箱</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：规格发错，需要70g的</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥320.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700" onclick="confirmReceipt()">确认签收商品</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="shipping">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260109045</span>
                    <span class="mx-3">|</span>
                    采购方：联想科技采购中心
                    <span class="mx-3">|</span>
                    物流：中通快递 (ZT9876543210)
                </div>
                <div class="status-badge status-shipping">退货中</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1550537687-c91072c4792d?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">联想(Lenovo) 23.8英寸 显示器</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：商品外观有划痕</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥899.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700" onclick="confirmReceipt()">确认签收商品</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="shipping">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260108033</span>
                    <span class="mx-3">|</span>
                    采购方：得力办公专营店
                    <span class="mx-3">|</span>
                    物流：京东快递 (JD1234567890)
                </div>
                <div class="status-badge status-shipping">退货中</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1512412023212-f09999392ef5?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-900">得力(deli) 0130 强力型订书机 50页厚层</h4>
                    <p class="text-xs text-gray-500 mt-1">退货原因：商品型号不符</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">退款金额</p>
                    <p class="text-lg font-bold text-primary">¥135.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700" onclick="confirmReceipt()">确认签收商品</button>
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货</button>
                </div>
            </div>
        </div>

        <!-- ========== 退货完成状态（3条） ========== -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="completed">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260105022</span>
                    <span class="mx-3">|</span>
                    采购方：联想科技采购中心
                    <span class="mx-3">|</span>
                    完成时间：2026-01-08 10:20
                </div>
                <div class="status-badge status-completed">退货完成</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1550537687-c91072c4792d?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-60">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">联想(Lenovo) 23.8英寸 显示器</h4>
                    <p class="text-xs text-gray-400 mt-1">退货原因：商品外观有划痕</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">已退款</p>
                    <p class="text-lg font-bold text-gray-600">¥899.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货结果</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="completed">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260103011</span>
                    <span class="mx-3">|</span>
                    采购方：晨光文具旗舰店
                    <span class="mx-3">|</span>
                    完成时间：2026-01-06 14:30
                </div>
                <div class="status-badge status-completed">退货完成</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1512412023212-f09999392ef5?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-60">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">得力(deli) 0130 强力型订书机 50页厚层</h4>
                    <p class="text-xs text-gray-400 mt-1">退货原因：商品型号不符</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">已退款</p>
                    <p class="text-lg font-bold text-gray-600">¥90.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货结果</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="completed">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20251230088</span>
                    <span class="mx-3">|</span>
                    采购方：长城科技集团
                    <span class="mx-3">|</span>
                    完成时间：2026-01-02 16:15
                </div>
                <div class="status-badge status-completed">退货完成</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1586075010623-265d1d6c76f2?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-60">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">A4 复印纸 80g 500张/包 5包/箱</h4>
                    <p class="text-xs text-gray-400 mt-1">退货原因：规格发错，需要70g的</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">已退款</p>
                    <p class="text-lg font-bold text-gray-600">¥160.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-700 text-sm rounded hover:bg-gray-50">查看退货结果</button>
                </div>
            </div>
        </div>

        <!-- ========== 已终止状态（3条） ========== -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="terminated">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260112066</span>
                    <span class="mx-3">|</span>
                    采购方：阳光地产集团采购部
                    <span class="mx-3">|</span>
                    终止时间：2026-01-12 14:20
                </div>
                <div class="status-badge status-terminated">已终止</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1544450173-8c486e1f98d6?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-50">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">佳能(Canon) LBP6230dn A4黑白激光打印机</h4>
                    <p class="text-xs text-red-500 mt-1">终止原因：供应商驳回 - 商品无质量问题</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">原退款金额</p>
                    <p class="text-lg font-bold text-gray-400 line-through">¥1,299.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-400 text-sm rounded cursor-not-allowed">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="terminated">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260110044</span>
                    <span class="mx-3">|</span>
                    采购方：晨光科技股份有限公司
                    <span class="mx-3">|</span>
                    终止时间：2026-01-10 09:00
                </div>
                <div class="status-badge status-terminated">已终止</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-50">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">晨光(M&G) A4复印纸 70g 500张/包</h4>
                    <p class="text-xs text-red-500 mt-1">终止原因：用户取消退货申请</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">原退款金额</p>
                    <p class="text-lg font-bold text-gray-400 line-through">¥180.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-400 text-sm rounded cursor-not-allowed">查看退货</button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden list-item" data-status="terminated">
            <div class="bg-gray-50 px-4 py-3 border-b border-gray-100 flex justify-between">
                <div class="text-sm text-gray-600">
                    <span class="font-medium text-gray-900">退货单号：TH20260108022</span>
                    <span class="mx-3">|</span>
                    采购方：得力办公用品采购中心
                    <span class="mx-3">|</span>
                    终止时间：2026-01-08 17:30
                </div>
                <div class="status-badge status-terminated">已终止</div>
            </div>
            <div class="p-4 flex items-center gap-4">
                <img src="https://images.unsplash.com/photo-1586953208448-b95a79798f07?q=80&w=120&auto=format&fit=crop" class="w-16 h-16 rounded border grayscale opacity-50">
                <div class="flex-1">
                    <h4 class="font-medium text-gray-400">得力(deli) 5028 透明胶带 48mm×50m</h4>
                    <p class="text-xs text-red-500 mt-1">终止原因：供应商驳回 - 商品符合描述</p>
                </div>
                <div class="text-right px-8 border-l border-gray-100">
                    <p class="text-xs text-gray-500">原退款金额</p>
                    <p class="text-lg font-bold text-gray-400 line-through">¥96.00</p>
                </div>
                <div class="flex flex-col gap-2 min-w-[100px]">
                    <button class="px-4 py-2 bg-white border border-gray-200 text-gray-400 text-sm rounded cursor-not-allowed">查看退货</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(status) {
            const tabs = ['all', 'pending', 'return', 'shipping', 'completed', 'terminated'];
            tabs.forEach(t => {
                const tab = document.getElementById('tab-' + t);
                if (tab) {
                    if (t === status) {
                        tab.classList.add('tab-active');
                        tab.classList.remove('text-gray-500');
                    } else {
                        tab.classList.remove('tab-active');
                        tab.classList.add('text-gray-500');
                    }
                }
            });

            const items = document.querySelectorAll('.list-item');
            items.forEach(item => {
                if (status === 'all' || item.getAttribute('data-status') === status) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function handleApply(isAgree) {
            if (isAgree) {
                alert('已同意退货申请，请等待采购方寄回商品。');
                switchTab('return');
            } else {
                const reason = prompt('请输入驳回原因：');
                if (reason) {
                    alert('退货申请已驳回。');
                }
            }
        }

        function confirmReceipt() {
            if (confirm('确认已收到买家寄回的商品？确认后将自动进入退款结算阶段。')) {
                alert('确认签收成功，状态已更新为“退货完成”。');
                switchTab('completed');
            }
        }

        function toggleFlowchart() {
            const module = document.getElementById('flowchartModule');
            const content = document.getElementById('flowchartContent');
            const icon = document.getElementById('flowchartIcon');
            
            // 如果模块是隐藏的，显示它并展开内容
            if (module.classList.contains('hidden')) {
                module.classList.remove('hidden');
                content.classList.remove('collapsed');
                content.classList.add('expanded');
                icon.style.transform = 'rotate(180deg)';
            } else {
                // 如果模块是显示的，收起内容并隐藏模块
                content.classList.remove('expanded');
                content.classList.add('collapsed');
                icon.style.transform = 'rotate(0deg)';
                // 等待动画完成后隐藏模块
                setTimeout(() => {
                    module.classList.add('hidden');
                }, 300);
            }
        }

        function toggleFlowchartContent() {
            const content = document.getElementById('flowchartContent');
            const icon = document.getElementById('flowchartIcon');
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                content.classList.add('expanded');
                icon.style.transform = 'rotate(180deg)';
            } else {
                content.classList.remove('expanded');
                content.classList.add('collapsed');
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // 页面加载时检查URL参数，自动打开对应tab
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const tab = urlParams.get('tab');
            if (tab && ['pending', 'return', 'shipping', 'completed', 'terminated', 'all'].includes(tab)) {
                switchTab(tab);
            }
        });
    </script>
</body>
</html>
